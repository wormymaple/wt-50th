[gd_scene load_steps=13 format=2]

[ext_resource path="res://Games/criminal_justice/ui_knife.png" type="Texture" id=1]
[ext_resource path="res://Games/criminal_justice/ui_hook.png" type="Texture" id=3]
[ext_resource path="res://Games/criminal_justice/ui_rippedcloth.png" type="Texture" id=4]
[ext_resource path="res://Games/criminal_justice/ui_photo.png" type="Texture" id=5]
[ext_resource path="res://Games/criminal_justice/ui_tabletop.png" type="Texture" id=6]
[ext_resource path="res://Game Assets/optimusprinceps/OptimusPrincepsSemiBold.ttf" type="DynamicFontData" id=8]
[ext_resource path="res://Games/criminal_justice/bg_courtforeground.png" type="Texture" id=9]
[ext_resource path="res://Games/criminal_justice/chr_judge.png" type="Texture" id=10]
[ext_resource path="res://Games/criminal_justice/chr_pirate.png" type="Texture" id=11]

[sub_resource type="GDScript" id=3]
script/source = "extends Control

var suspect = null
var PossibleSuspects = [\"pirate\", \"kid\", \"ghost\"]
var passed = null
var failed = null
var FadeInValue = 0
#Stopwatch stuff:
#var FadeInStopwatch = null
var StartFadeIn = false
#var ElapsedTime: float = 0.0
#var ElapsedDelta = 0
#var CurrentSecondThreshold = 0.1

#var rng = RandomNumberGenerator.new()

func _ready():
	#This randomizes the suspect
	randomize()
	suspect = PossibleSuspects[randi() % PossibleSuspects.size()]
	print(suspect)
	
	#This makes the correct suspect visible
	if suspect == \"pirate\":
		$CanvasLayer2/Kid.visible = false
		$CanvasLayer2/Ghost.visible = false
	if suspect == \"kid\":
		$CanvasLayer2/Pirate.visible = false
		$CanvasLayer2/Ghost.visible = false
	if suspect == \"ghost\":
		$CanvasLayer2/Pirate.visible = false
		$CanvasLayer2/Kid.visible = false
		$CanvasLayer2/Judge.visible = false


func player_win():
	#$CanvasLayer.visible = false
	$CanvasLayer.layer = 0
	#Make victory text appear and stuff
	passed = true
	#print(\"starting fade in!\")	
	StartFadeIn = true
	
	print(\"You win!\")


func player_lose():
	#$CanvasLayer.visible = false
	$CanvasLayer.layer = 0
	print(\"Lose!\")
	StartFadeIn = true
	#$WinLoseLabel.add_color_override(\"font_color\", Color(1,0,0))
	failed = true


func _on_ClothButton_pressed():
	if suspect == \"kid\":
		player_win()
	else:
		player_lose()

func _on_HookButton_pressed():
	if suspect == \"pirate\":
		player_win()
	else:
		player_lose()

func _on_PhototButton_pressed():
	if suspect == \"ghost\": 
		player_win()
	else:
		player_lose()

func _on_KnifeButton_pressed():
	player_lose()
"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 13.0459, 14.5 )

[sub_resource type="DynamicFont" id=2]
size = 11
use_mipmaps = true
use_filter = true
font_data = ExtResource( 8 )

[node name="box" type="RigidBody2D"]
input_pickable = true
mass = 0.00102041
gravity_scale = 0.0
script = SubResource( 3 )

[node name="Sprite7" type="Sprite" parent="."]
position = Vector2( 112, 50 )
scale = Vector2( 0.0239636, 0.0259427 )
texture = ExtResource( 11 )

[node name="Sprite6" type="Sprite" parent="."]
position = Vector2( 106, 71 )
scale = Vector2( 0.0420035, 0.0348558 )
texture = ExtResource( 9 )

[node name="Sprite5" type="Sprite" parent="."]
position = Vector2( 40, 51 )
scale = Vector2( 0.0150467, 0.030459 )
texture = ExtResource( 6 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( 60.9266, 29.9706 )
scale = Vector2( -0.0200529, 0.0185958 )
texture = ExtResource( 4 )

[node name="Correct" type="CollisionShape2D" parent="."]
position = Vector2( 23, 73 )
shape = SubResource( 1 )

[node name="Sprite2" type="Sprite" parent="."]
position = Vector2( 22.8164, 75.21 )
scale = Vector2( 0.00647672, 0.00670844 )
texture = ExtResource( 3 )

[node name="Sprite4" type="Sprite" parent="."]
position = Vector2( 24.8164, 34.21 )
scale = Vector2( 0.0100521, 0.0084478 )
texture = ExtResource( 5 )

[node name="Sprite3" type="Sprite" parent="."]
position = Vector2( 59.8164, 75.21 )
scale = Vector2( 0.0136752, 0.0205589 )
texture = ExtResource( 1 )

[node name="Label" type="Label" parent="."]
margin_right = 194.0
margin_bottom = 14.0
custom_fonts/font = SubResource( 2 )
text = "Match the item to the suspect"
__meta__ = {
"_edit_use_anchors_": true
}

[node name="Sprite8" type="Sprite" parent="."]
position = Vector2( 408.25, 483.375 )
scale = Vector2( 0.034322, 0.0304656 )
texture = ExtResource( 10 )

[connection signal="input_event" from="." to="." method="_on_box_input_event"]
